jenkins:
  systemMessage: 'This instance was automatically configured by Jenkins Configuration as Code plugin...'
  globalNodeProperties:
  - envVars:
      env:
      - key: IAR_LMS_BEARER_TOKEN
        value: ${IAR_LMS_BEARER_TOKEN}

  # Security Realm for user authentication
  securityRealm:
    local:
      allowsSignup: false
      users:
      - id: 'admin'
        password: 'admin'
      - id: 'developer'
        password: 'developer'

  # Authorization Strategy
  authorizationStrategy:
    globalMatrix:
      entries:
        - user:
            name: admin
            permissions:
              - Agent/Build
              - Agent/Configure
              - Agent/Connect
              - Agent/Create
              - Agent/Delete
              - Agent/Disconnect
              - Credentials/Create
              - Credentials/Delete
              - Credentials/ManageDomains
              - Credentials/Update
              - Credentials/View
              - Job/Build
              - Job/Cancel
              - Job/Configure
              - Job/Create
              - Job/Delete
              - Job/Discover
              - Job/Move
              - Job/Read
              - Job/Workspace
              - Overall/Administer
              - Overall/Read
              - Run/Delete
              - Run/Replay
              - Run/Update
              - View/Configure
              - View/Create
              - View/Delete
              - View/Read
        - user:
            name: developer
            permissions:
              - Overall/Read

  # Docker cloud configuration
  clouds:
    - docker:
        name: 'Jenkins cloud'
        dockerApi:
          dockerHost:
            uri: 'unix:///var/run/docker.sock'

# Credentials
credentials:
  system:
    domainCredentials:
      - credentials:
        - usernamePassword:
            scope: GLOBAL 
            id: 'gitea-server-creds'
            username: 'jenkins'
            password: 'jenkins'
            description: 'The Gitea user/pass authentication'

# Additional configurations
unclassified:
  location:
    url: http://jenkins:8080/

  # Gitea server configuration
  giteaServers:
    servers:
      - displayName: 'gitea-server'
        serverUrl: 'http://gitea:3000'
        credentialsId: 'gitea-server-creds'
        manageHooks: true

